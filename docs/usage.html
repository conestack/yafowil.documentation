<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Usage &#8212; YAFOWIL - Yet Another Form Widget Library</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=a075eb5b" />
    <link id="pygments_dark_css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css" href="_static/pygments_dark.css?v=20074c1a" />
    <link rel="stylesheet" type="text/css" href="_static/css/conestack.css?v=53c11f18" />
    <link rel="stylesheet" type="text/css" href="_static/style.css?v=77473a58" />
    <link rel="stylesheet" type="text/css" href="_static/1942.ttf?v=957afb88" />
    <script src="_static/documentation_options.js?v=3304f9e4"></script>
    <script src="_static/doctools.js?v=fd6eb6e6"></script>
    <script src="_static/sphinx_highlight.js?v=6ffebe34"></script>
    <link rel="icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Extending YAFOWIL - Custom Blueprints" href="extend.html" />
    <link rel="prev" title="Core Concepts" href="concepts.html" />
<link rel="stylesheet" type="text/css" src="_static/bootstrap/bootstrap.css" />
<script src="_static/bootstrap/bootstrap.bundle.min.js"></script>
<script src="_static/js/conestack.js"></script>
<script src="_static/js/colortoggle.js"></script>

  </head><body>

  <noscript>
    <style type="text/css">
      #searchbox,
      #searchdesc {
        display: none;
      }
      @media (max-width: 768px) {
        #navbar-toggle {
          display: none;
        }
        #cs-mobile-menu {
          display: block;
        }
        #cs-layout {
          margin-top: 12rem;
        }
        #cs-ext-links {
          margin-right: 2rem!important;
        }
      }
    </style>
  </noscript>

  
  <header class="navbar navbar-expand-md sticky-top" id="header">
    <nav class="container-xxl flex-wrap flex-md-nowrap p-0" id="cs-nav">
  <a id="logo" class="navbar-brand p-0 me-2" href="index.html">
    <img src="_static/yafowil_logo_white.svg"
         alt="Logo"
         width="50px"
         height="50px" />
    <span>Yafowil</span>
  </a>

      
  <div id="nav-search" class="ms-auto">
    <div id="searchbox" class="nav-item me-3" role="search" style="display: none;">
      <form class="search input-group" action="search.html" method="get">
        <input type="text" class="form-control" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
        <button type="submit" 
                class="bi bi-search input-group-text"
                btn-title="Search documentation"></button>
      </form>
    </div>
  </div>
      
  <div id="cs-ext-links"class="me-3">
    <ul class="navbar-nav flex-row ms-md-auto">
  <li class="nav-item" data-title="GitHub">
    <a class="nav-link p-2" href="https://github.com/conestack/yafowil" target="_blank" rel="noopener">
      <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" class="navbar-nav-svg d-inline-block align-text-top" viewBox="0 0 512 499.36" role="img"><title>GitHub</title><path fill="currentColor" fill-rule="evenodd" d="M256 0C114.64 0 0 114.61 0 256c0 113.09 73.34 209 175.08 242.9 12.8 2.35 17.47-5.56 17.47-12.34 0-6.08-.22-22.18-.35-43.54-71.2 15.49-86.2-34.34-86.2-34.34-11.64-29.57-28.42-37.45-28.42-37.45-23.27-15.84 1.73-15.55 1.73-15.55 25.69 1.81 39.21 26.38 39.21 26.38 22.84 39.12 59.92 27.82 74.5 21.27 2.33-16.54 8.94-27.82 16.25-34.22-56.84-6.43-116.6-28.43-116.6-126.49 0-27.95 10-50.8 26.35-68.69-2.63-6.48-11.42-32.5 2.51-67.75 0 0 21.49-6.88 70.4 26.24a242.65 242.65 0 0 1 128.18 0c48.87-33.13 70.33-26.24 70.33-26.24 14 35.25 5.18 61.27 2.55 67.75 16.41 17.9 26.31 40.75 26.31 68.69 0 98.35-59.85 120-116.88 126.32 9.19 7.9 17.38 23.53 17.38 47.41 0 34.22-.31 61.83-.31 70.23 0 6.85 4.61 14.81 17.6 12.31C438.72 464.97 512 369.08 512 256.02 512 114.62 397.37 0 256 0z"></path></svg>
    </a>
  </li>

  <li class="nav-item" data-title="Pypi">
    <a class="nav-link p-2" href="https://pypi.org/project/yafowil/" target="_blank" rel="noopener">
      <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="36" height="36" viewBox="0 0 50 50" role="img" style=" fill:#000000;"><path d="M 25 2 C 20.941406 2 18.1875 2.96875 16.4375 4.375 C 14.6875 5.78125 14 7.589844 14 9.09375 L 14 14 L 24 14 L 24 15 L 9.09375 15 C 7.265625 15 5.410156 15.792969 4.09375 17.46875 C 2.777344 19.144531 2 21.644531 2 25 C 2 28.355469 2.777344 30.855469 4.09375 32.53125 C 5.410156 34.207031 7.265625 35 9.09375 35 L 14 35 L 14 40.90625 C 14 42.410156 14.6875 44.21875 16.4375 45.625 C 18.1875 47.03125 20.941406 48 25 48 C 29.058594 48 31.8125 47.03125 33.5625 45.625 C 35.3125 44.21875 36 42.410156 36 40.90625 L 36 36 L 26 36 L 26 35 L 40.90625 35 C 42.734375 35 44.589844 34.207031 45.90625 32.53125 C 47.222656 30.855469 48 28.355469 48 25 C 48 21.644531 47.222656 19.144531 45.90625 17.46875 C 44.589844 15.792969 42.734375 15 40.90625 15 L 36 15 L 36 9.09375 C 36 7.550781 35.316406 5.738281 33.5625 4.34375 C 31.808594 2.949219 29.054688 2 25 2 Z M 25 4 C 28.746094 4 31.015625 4.875 32.3125 5.90625 C 33.609375 6.9375 34 8.136719 34 9.09375 L 34 21 C 34 22.65625 32.65625 24 31 24 L 19 24 C 16.941406 24 15.167969 25.269531 14.40625 27.0625 C 14.277344 27.359375 14.160156 27.675781 14.09375 28 C 14.027344 28.324219 14 28.65625 14 29 L 14 33 L 9.09375 33 C 7.824219 33 6.648438 32.503906 5.6875 31.28125 C 4.726563 30.058594 4 28.042969 4 25 C 4 21.957031 4.726563 19.941406 5.6875 18.71875 C 6.648438 17.496094 7.824219 17 9.09375 17 L 26 17 L 26 12 L 16 12 L 16 9.09375 C 16 8.199219 16.386719 6.980469 17.6875 5.9375 C 18.988281 4.894531 21.257813 4 25 4 Z M 20 7 C 18.898438 7 18 7.898438 18 9 C 18 10.101563 18.898438 11 20 11 C 21.101563 11 22 10.101563 22 9 C 22 7.898438 21.101563 7 20 7 Z M 36 17 L 40.90625 17 C 42.175781 17 43.351563 17.496094 44.3125 18.71875 C 45.273438 19.941406 46 21.957031 46 25 C 46 28.042969 45.273438 30.058594 44.3125 31.28125 C 43.351563 32.503906 42.175781 33 40.90625 33 L 24 33 L 24 38 L 34 38 L 34 40.90625 C 34 41.800781 33.613281 43.019531 32.3125 44.0625 C 31.011719 45.105469 28.742188 46 25 46 C 21.257813 46 18.988281 45.105469 17.6875 44.0625 C 16.386719 43.019531 16 41.800781 16 40.90625 L 16 29 C 16 28.792969 16.023438 28.601563 16.0625 28.40625 C 16.34375 27.039063 17.550781 26 19 26 L 31 26 C 33.746094 26 36 23.746094 36 21 Z M 30 39 C 28.898438 39 28 39.898438 28 41 C 28 42.101563 28.898438 43 30 43 C 31.101563 43 32 42.101563 32 41 C 32 39.898438 31.101563 39 30 39 Z"></path></svg>
    </a>
  </li>

    </ul>
  </div>


      <div id="colortoggler-wrapper">
        <div id="colortoggler"
             class="nav-item dropdown align-items-center h-100 p-0 form-check form-switch me-4">
          <i class="bi-sun-fill me-2"></i>
          <div class="form-check form-switch m-0 d-inline-block">
            <input class="form-check-input" type="checkbox" id="colortoggle-switch">
          </div>
          <i class="bi-moon-fill"></i>
        </div>
      </div>

      <button id="navbar-toggle" class="navbar-toggler p-0 me-4" type="button" data-bs-toggle="collapse" data-bs-target="#cs-mobile-menu">
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" class="bi" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2.5 11.5A.5.5 0 0 1 3 11h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 7h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 3h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"></path></svg>
      </button>

      <div class="collapse container-fluid m-0 p-3" id="cs-mobile-menu"><nav class="cs-mobile-toc">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts.html">Core Concepts</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="extend.html">Extending YAFOWIL - Custom Blueprints</a></li>
<li class="toctree-l1"><a class="reference internal" href="blueprints.html">Reference: Blueprints</a></li>
<li class="toctree-l1"><a class="reference internal" href="integrations.html">Integrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="yaml.html">Describe YAFOWIL forms with YAML</a></li>
</ul>

</nav>
      </div>
    </nav>
  </header>
  

  <div class="container-xxl my-md-4" id="cs-layout">
    
  <aside id="cs-sidebar" class="ms-4 sphinxsidebar"><nav class="cs-nav-toc">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#basic-form-example">Basic Form Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#processing-form-submissions">Processing Form Submissions</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#adding-validation">Adding Validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#minimal-wsgi-application">Minimal WSGI Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="concepts.html">Core Concepts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="concepts.html#widget">Widget</a></li>
<li class="toctree-l2"><a class="reference internal" href="concepts.html#runtimedata">RuntimeData</a></li>
<li class="toctree-l2"><a class="reference internal" href="concepts.html#controller">Controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="concepts.html#factory">Factory</a></li>
<li class="toctree-l2"><a class="reference internal" href="concepts.html#chains">Chains</a></li>
<li class="toctree-l2"><a class="reference internal" href="concepts.html#validation">Validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="concepts.html#rendering-modes">Rendering Modes</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#widget-trees">Widget Trees</a></li>
<li class="toctree-l2"><a class="reference internal" href="#data-extraction">Data Extraction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#validation">Validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#persistence">Persistence</a></li>
<li class="toctree-l2"><a class="reference internal" href="#form-actions">Form Actions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="extend.html">Extending YAFOWIL - Custom Blueprints</a><ul>
<li class="toctree-l2"><a class="reference internal" href="extend.html#blueprint-anatomy">Blueprint Anatomy</a></li>
<li class="toctree-l2"><a class="reference internal" href="extend.html#writing-extractors">Writing Extractors</a></li>
<li class="toctree-l2"><a class="reference internal" href="extend.html#writing-renderers">Writing Renderers</a></li>
<li class="toctree-l2"><a class="reference internal" href="extend.html#the-managedprops-decorator">The &#64;managedprops Decorator</a></li>
<li class="toctree-l2"><a class="reference internal" href="extend.html#documenting-properties">Documenting Properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="extend.html#registering-blueprints">Registering Blueprints</a></li>
<li class="toctree-l2"><a class="reference internal" href="extend.html#complete-example-rating-widget">Complete Example: Rating Widget</a></li>
<li class="toctree-l2"><a class="reference internal" href="extend.html#packaging-for-distribution">Packaging for Distribution</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="blueprints.html">Reference: Blueprints</a><ul>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#ace">ace</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#array">array</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#autocomplete">autocomplete</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#button">button</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#checkbox">checkbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#chosen">chosen</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#compound">compound</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#cron">cron</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#datetime">datetime</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#dict">dict</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#div">div</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#email">email</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#error">error</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#field">field</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#fieldset">fieldset</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#file">file</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#form">form</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#help">help</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#hidden">hidden</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#image">image</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#label">label</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#lines">lines</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#location">location</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#multiselect">multiselect</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#number">number</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#password">password</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#proxy">proxy</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#richtext">richtext</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#search">search</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#select">select</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#select2">select2</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#slider">slider</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#submit">submit</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#table">table</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#tag">tag</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#tbody">tbody</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#td">td</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#text">text</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#textarea">textarea</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#th">th</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#thead">thead</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#time">time</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#tr">tr</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#url">url</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#wysihtml5">wysihtml5</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="integrations.html">Integrations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="integrations.html#basics">Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="integrations.html#webob-based-frameworks">WebOb-based Frameworks</a></li>
<li class="toctree-l2"><a class="reference internal" href="integrations.html#zope-2-plone">Zope 2 / Plone</a></li>
<li class="toctree-l2"><a class="reference internal" href="integrations.html#bootstrap-styling">Bootstrap Styling</a></li>
<li class="toctree-l2"><a class="reference internal" href="integrations.html#treibstoff">Treibstoff</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="yaml.html">Describe YAFOWIL forms with YAML</a><ul>
<li class="toctree-l2"><a class="reference internal" href="yaml.html#create-file-containing-form-description">Create file containing form description</a></li>
<li class="toctree-l2"><a class="reference internal" href="yaml.html#computed-values">Computed values</a></li>
<li class="toctree-l2"><a class="reference internal" href="yaml.html#define-rendering-context">Define rendering context</a></li>
<li class="toctree-l2"><a class="reference internal" href="yaml.html#create-message-factory">Create Message Factory</a></li>
<li class="toctree-l2"><a class="reference internal" href="yaml.html#creating-yafowil-forms-form-yaml-files">Creating YAFOWIL-Forms form YAML-Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="yaml.html#manage-translations-of-yaml-forms">Manage translations of YAML forms</a></li>
</ul>
</li>
</ul>

</nav>
    
  </aside>
    

    
      <main class="document cs-main order-1" role="main">
    
      <div class="ps-lg-4 mt-3 cs-content">
        
  <section id="usage">
<h1>Usage<a class="headerlink" href="#usage" title="Link to this heading">#</a></h1>
<p>This chapter covers common usage patterns for YAFOWIL forms.</p>
<section id="widget-trees">
<h2>Widget Trees<a class="headerlink" href="#widget-trees" title="Link to this heading">#</a></h2>
<p>Forms are organized as widget trees. The form is the root, containing
compounds (fieldsets) and leaves (input fields):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">form</span> <span class="o">=</span> <span class="n">factory</span><span class="p">(</span><span class="s1">&#39;form&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;myform&#39;</span><span class="p">,</span> <span class="n">props</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;action&#39;</span><span class="p">:</span> <span class="s1">&#39;/submit&#39;</span><span class="p">})</span>

<span class="n">form</span><span class="p">[</span><span class="s1">&#39;personal&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">factory</span><span class="p">(</span><span class="s1">&#39;fieldset&#39;</span><span class="p">,</span> <span class="n">props</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;legend&#39;</span><span class="p">:</span> <span class="s1">&#39;Personal Info&#39;</span><span class="p">})</span>
<span class="n">form</span><span class="p">[</span><span class="s1">&#39;personal&#39;</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">factory</span><span class="p">(</span><span class="s1">&#39;field:label:text&#39;</span><span class="p">,</span> <span class="n">props</span><span class="o">=</span><span class="p">{</span>
    <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Name&#39;</span><span class="p">,</span>
<span class="p">})</span>
<span class="n">form</span><span class="p">[</span><span class="s1">&#39;personal&#39;</span><span class="p">][</span><span class="s1">&#39;email&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">factory</span><span class="p">(</span><span class="s1">&#39;field:label:email&#39;</span><span class="p">,</span> <span class="n">props</span><span class="o">=</span><span class="p">{</span>
    <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Email&#39;</span><span class="p">,</span>
<span class="p">})</span>

<span class="n">form</span><span class="p">[</span><span class="s1">&#39;submit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">factory</span><span class="p">(</span><span class="s1">&#39;submit&#39;</span><span class="p">,</span> <span class="n">props</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;action&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">})</span>
</pre></div>
</div>
</section>
<section id="data-extraction">
<h2>Data Extraction<a class="headerlink" href="#data-extraction" title="Link to this heading">#</a></h2>
<p>After processing, extracted data is available on <code class="docutils literal notranslate"><span class="pre">controller.data</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">request</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;myform.personal.name&#39;</span><span class="p">:</span> <span class="s1">&#39;Alice&#39;</span><span class="p">,</span>
    <span class="s1">&#39;myform.personal.email&#39;</span><span class="p">:</span> <span class="s1">&#39;alice@example.com&#39;</span><span class="p">,</span>
    <span class="s1">&#39;action.myform.submit&#39;</span><span class="p">:</span> <span class="s1">&#39;submit&#39;</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">controller</span> <span class="o">=</span> <span class="n">Controller</span><span class="p">(</span><span class="n">form</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>

<span class="n">name</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="s1">&#39;myform.personal.name&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">extracted</span>
<span class="n">email</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="s1">&#39;myform.personal.email&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">extracted</span>
</pre></div>
</div>
</section>
<section id="validation">
<h2>Validation<a class="headerlink" href="#validation" title="Link to this heading">#</a></h2>
<section id="required-fields">
<h3>Required Fields<a class="headerlink" href="#required-fields" title="Link to this heading">#</a></h3>
<p>Use the <code class="docutils literal notranslate"><span class="pre">required</span></code> property:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">factory</span><span class="p">(</span><span class="s1">&#39;field:label:error:text&#39;</span><span class="p">,</span> <span class="n">props</span><span class="o">=</span><span class="p">{</span>
    <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Name&#39;</span><span class="p">,</span>
    <span class="s1">&#39;required&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>  <span class="c1"># or a custom message string</span>
<span class="p">})</span>
</pre></div>
</div>
</section>
<section id="datatype-conversion">
<h3>Datatype Conversion<a class="headerlink" href="#datatype-conversion" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">datatype</span></code> property converts extracted strings:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">factory</span><span class="p">(</span><span class="s1">&#39;field:label:text&#39;</span><span class="p">,</span> <span class="n">props</span><span class="o">=</span><span class="p">{</span>
    <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Age&#39;</span><span class="p">,</span>
    <span class="s1">&#39;datatype&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<span class="p">})</span>

<span class="n">form</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">factory</span><span class="p">(</span><span class="s1">&#39;field:label:text&#39;</span><span class="p">,</span> <span class="n">props</span><span class="o">=</span><span class="p">{</span>
    <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;ID&#39;</span><span class="p">,</span>
    <span class="s1">&#39;datatype&#39;</span><span class="p">:</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">,</span>
<span class="p">})</span>
</pre></div>
</div>
<p>Supported by: <code class="docutils literal notranslate"><span class="pre">hidden</span></code>, <code class="docutils literal notranslate"><span class="pre">proxy</span></code>, <code class="docutils literal notranslate"><span class="pre">text</span></code>, <code class="docutils literal notranslate"><span class="pre">lines</span></code>, <code class="docutils literal notranslate"><span class="pre">select</span></code>, <code class="docutils literal notranslate"><span class="pre">number</span></code>.</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">emptyvalue</span></code> for non-required fields with datatype:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;count&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">factory</span><span class="p">(</span><span class="s1">&#39;field:label:text&#39;</span><span class="p">,</span> <span class="n">props</span><span class="o">=</span><span class="p">{</span>
    <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Count&#39;</span><span class="p">,</span>
    <span class="s1">&#39;datatype&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="s1">&#39;emptyvalue&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">})</span>
</pre></div>
</div>
</section>
<section id="custom-validation">
<h3>Custom Validation<a class="headerlink" href="#custom-validation" title="Link to this heading">#</a></h3>
<p>Inject custom extractors using the <code class="docutils literal notranslate"><span class="pre">*</span></code> prefix:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">yafowil.base</span><span class="w"> </span><span class="kn">import</span> <span class="n">ExtractionError</span>

<span class="k">def</span><span class="w"> </span><span class="nf">validate_range</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">extracted</span>
    <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span><span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">value</span> <span class="o">&lt;=</span> <span class="mi">100</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">ExtractionError</span><span class="p">(</span><span class="s1">&#39;Value must be between 0 and 100&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">value</span>

<span class="n">form</span><span class="p">[</span><span class="s1">&#39;score&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">factory</span><span class="p">(</span><span class="s1">&#39;field:label:error:*rangecheck:text&#39;</span><span class="p">,</span> <span class="n">props</span><span class="o">=</span><span class="p">{</span>
    <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Score&#39;</span><span class="p">,</span>
    <span class="s1">&#39;datatype&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<span class="p">},</span> <span class="n">custom</span><span class="o">=</span><span class="p">{</span>
    <span class="s1">&#39;rangecheck&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;extractors&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">validate_range</span><span class="p">]},</span>
<span class="p">})</span>
</pre></div>
</div>
</section>
<section id="invariants">
<h3>Invariants<a class="headerlink" href="#invariants" title="Link to this heading">#</a></h3>
<p>Cross-field validation uses extractors on parent compounds:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">xor_validator</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;field_a&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">extracted</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;field_b&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">extracted</span>
    <span class="k">if</span> <span class="nb">bool</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">==</span> <span class="nb">bool</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
        <span class="n">error</span> <span class="o">=</span> <span class="n">ExtractionError</span><span class="p">(</span><span class="s1">&#39;Fill exactly one field&#39;</span><span class="p">)</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;field_a&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;field_b&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">data</span><span class="o">.</span><span class="n">extracted</span>

<span class="n">form</span> <span class="o">=</span> <span class="n">factory</span><span class="p">(</span><span class="s1">&#39;*xor:form&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;myform&#39;</span><span class="p">,</span> <span class="n">props</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;action&#39;</span><span class="p">:</span> <span class="s1">&#39;/&#39;</span><span class="p">},</span> <span class="n">custom</span><span class="o">=</span><span class="p">{</span>
    <span class="s1">&#39;xor&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;extractors&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">xor_validator</span><span class="p">]},</span>
<span class="p">})</span>
<span class="n">form</span><span class="p">[</span><span class="s1">&#39;field_a&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">factory</span><span class="p">(</span><span class="s1">&#39;field:label:error:text&#39;</span><span class="p">,</span> <span class="n">props</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;A&#39;</span><span class="p">})</span>
<span class="n">form</span><span class="p">[</span><span class="s1">&#39;field_b&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">factory</span><span class="p">(</span><span class="s1">&#39;field:label:error:text&#39;</span><span class="p">,</span> <span class="n">props</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;B&#39;</span><span class="p">})</span>
</pre></div>
</div>
</section>
</section>
<section id="persistence">
<h2>Persistence<a class="headerlink" href="#persistence" title="Link to this heading">#</a></h2>
<p>YAFOWIL provides delegation for single-model forms.</p>
<section id="manual-persistence">
<h3>Manual Persistence<a class="headerlink" href="#manual-persistence" title="Link to this heading">#</a></h3>
<p>Handle extraction manually in the submit handler:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">save</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="n">model</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="s1">&#39;myform.name&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">extracted</span>
    <span class="n">model</span><span class="o">.</span><span class="n">email</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="s1">&#39;myform.email&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">extracted</span>
    <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="automatic-persistence">
<h3>Automatic Persistence<a class="headerlink" href="#automatic-persistence" title="Link to this heading">#</a></h3>
<p>Use <code class="docutils literal notranslate"><span class="pre">data.write()</span></code> for automatic delegation:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">yafowil.persistence</span><span class="w"> </span><span class="kn">import</span> <span class="n">attribute_writer</span>

<span class="n">form</span> <span class="o">=</span> <span class="n">factory</span><span class="p">(</span><span class="s1">&#39;form&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;myform&#39;</span><span class="p">,</span> <span class="n">props</span><span class="o">=</span><span class="p">{</span>
    <span class="s1">&#39;action&#39;</span><span class="p">:</span> <span class="s1">&#39;/submit&#39;</span><span class="p">,</span>
    <span class="s1">&#39;persist_writer&#39;</span><span class="p">:</span> <span class="n">attribute_writer</span><span class="p">,</span>
<span class="p">})</span>
<span class="n">form</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">factory</span><span class="p">(</span><span class="s1">&#39;field:label:text&#39;</span><span class="p">,</span> <span class="n">props</span><span class="o">=</span><span class="p">{</span>
    <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Name&#39;</span><span class="p">,</span>
    <span class="s1">&#39;persist&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>  <span class="c1"># Default for most input blueprints</span>
<span class="p">})</span>

<span class="k">def</span><span class="w"> </span><span class="nf">save</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="n">data</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>  <span class="c1"># Writes all persist=True fields to model</span>
    <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</pre></div>
</div>
<p>Available writers:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">attribute_writer</span></code> - Sets attributes on model</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_mapping_writer</span></code> - Sets dict keys on model</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">node_attribute_writer</span></code> - Sets node.attrs keys on model</p></li>
</ul>
</section>
<section id="customizing-persistence">
<h3>Customizing Persistence<a class="headerlink" href="#customizing-persistence" title="Link to this heading">#</a></h3>
<p>Override target attribute name:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;user_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">factory</span><span class="p">(</span><span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="n">props</span><span class="o">=</span><span class="p">{</span>
    <span class="s1">&#39;persist&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;persist_target&#39;</span><span class="p">:</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span>  <span class="c1"># Writes to model.name, not model.user_name</span>
<span class="p">})</span>
</pre></div>
</div>
<p>Override writer per field:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;tags&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">factory</span><span class="p">(</span><span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="n">props</span><span class="o">=</span><span class="p">{</span>
    <span class="s1">&#39;persist&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;persist_writer&#39;</span><span class="p">:</span> <span class="n">my_custom_writer</span><span class="p">,</span>
<span class="p">})</span>
</pre></div>
</div>
</section>
</section>
<section id="form-actions">
<h2>Form Actions<a class="headerlink" href="#form-actions" title="Link to this heading">#</a></h2>
<p>Submit buttons trigger handlers when clicked:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">save_handler</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="c1"># Process the form</span>
    <span class="k">pass</span>

<span class="k">def</span><span class="w"> </span><span class="nf">next_url</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="s1">&#39;/success&#39;</span>

<span class="n">form</span><span class="p">[</span><span class="s1">&#39;submit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">factory</span><span class="p">(</span><span class="s1">&#39;submit&#39;</span><span class="p">,</span> <span class="n">props</span><span class="o">=</span><span class="p">{</span>
    <span class="s1">&#39;handler&#39;</span><span class="p">:</span> <span class="n">save_handler</span><span class="p">,</span>
    <span class="s1">&#39;next&#39;</span><span class="p">:</span> <span class="n">next_url</span><span class="p">,</span>
    <span class="s1">&#39;action&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">})</span>
</pre></div>
</div>
<p>Multiple actions:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;save&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">factory</span><span class="p">(</span><span class="s1">&#39;submit&#39;</span><span class="p">,</span> <span class="n">props</span><span class="o">=</span><span class="p">{</span>
    <span class="s1">&#39;handler&#39;</span><span class="p">:</span> <span class="n">save_handler</span><span class="p">,</span>
    <span class="s1">&#39;action&#39;</span><span class="p">:</span> <span class="s1">&#39;save&#39;</span><span class="p">,</span>
<span class="p">})</span>
<span class="n">form</span><span class="p">[</span><span class="s1">&#39;delete&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">factory</span><span class="p">(</span><span class="s1">&#39;submit&#39;</span><span class="p">,</span> <span class="n">props</span><span class="o">=</span><span class="p">{</span>
    <span class="s1">&#39;handler&#39;</span><span class="p">:</span> <span class="n">delete_handler</span><span class="p">,</span>
    <span class="s1">&#39;action&#39;</span><span class="p">:</span> <span class="s1">&#39;delete&#39;</span><span class="p">,</span>
<span class="p">})</span>
</pre></div>
</div>
</section>
</section>


      </div>

    
  <div class="cs-local-toc mx-4 mt-4 mb-5 my-md-0 ps-xl-3 mb-lg-5 text-muted">
    <strong class="d-block h6 mb-2 pb-2 border-bottom">On this page</strong>
    <nav id="TableOfContents">
      <ul>
<li><a class="reference internal" href="#widget-trees">Widget Trees</a></li>
<li><a class="reference internal" href="#data-extraction">Data Extraction</a></li>
<li><a class="reference internal" href="#validation">Validation</a><ul>
<li><a class="reference internal" href="#required-fields">Required Fields</a></li>
<li><a class="reference internal" href="#datatype-conversion">Datatype Conversion</a></li>
<li><a class="reference internal" href="#custom-validation">Custom Validation</a></li>
<li><a class="reference internal" href="#invariants">Invariants</a></li>
</ul>
</li>
<li><a class="reference internal" href="#persistence">Persistence</a><ul>
<li><a class="reference internal" href="#manual-persistence">Manual Persistence</a></li>
<li><a class="reference internal" href="#automatic-persistence">Automatic Persistence</a></li>
<li><a class="reference internal" href="#customizing-persistence">Customizing Persistence</a></li>
</ul>
</li>
<li><a class="reference internal" href="#form-actions">Form Actions</a></li>
</ul>

    </nav>
  </div>
    
    </main>
  </div><div class="container footer" role="contentinfo">
  <footer class="d-flex flex-wrap justify-content-between align-items-center pt-2 my-4 border-top"><ul class="pb-2 mb-3 nav container border-bottom">
  <li class="nav-item col-md-6 col">
    <a href="concepts.html"
       title="previous chapter"
       class="nav-link px-2 text-muted previous-chapter">Core Concepts</a>
  </li>
  <li class="nav-item col-md-6 col text-end">
    <a href="extend.html"
       title="next chapter"
       class="nav-link px-2 text-muted next-chapter">Extending YAFOWIL - Custom Blueprints</a>
  </li>
</ul>
      <div class="container text-center text-muted pt-2 pb-2">
          &#169; Copyright 2010-2025, Yafowil Contributors.
      </div>
      <div class="container text-center text-muted pt-2 pb-2">
        Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 9.0.1.
      </div>
  </footer>
</div>

  </body>
</html>